<?xml version="1.0"?>

<!--
    check the config file here: https://labwc.github.io/
-->

<labwc_config>

    <core>
        <decoration>server</decoration>
        <gap>0</gap>
        <adaptiveSync>no</adaptiveSync>
        <allowTearing>no</allowTearing>
        <autoEnableOutputs>yes</autoEnableOutputs>
        <reuseOutputMode>no</reuseOutputMode>
        <xwaylandPersistence>no</xwaylandPersistence>
        <primarySelection>yes</primarySelection>
    </core>

    <placement>
        <policy>cascade</policy>
    </placement>

    <!-- <font><theme> can be defined without an attribute to set all places 
    <theme>
        <name></name>
        <icon></icon>
        <fallbackAppIcon>labwc</fallbackAppIcon>
        <titlebar>
            <layout>icon:iconify,max,close</layout>
            <showTitle>yes</showTitle>
        </titlebar>
        <cornerRadius>8</cornerRadius>
        <keepBorder>yes</keepBorder>
        <dropShadows>no</dropShadows>
        <dropShadowsOnTiled>no</dropShadowsOnTiled>
        <font place="ActiveWindow">
            <name>Inter Display</name>
            <size>11</size>
            <slant>normal</slant>
            <weight>normal</weight>
        </font>
        <font place="InactiveWindow">
            <name>Inter Display</name>
            <size>11</size>
            <slant>normal</slant>
            <weight>normal</weight>
        </font>
        <font place="MenuHeader">
            <name>Inter Display</name>
            <size>11</size>
            <slant>normal</slant>
            <weight>normal</weight>
        </font>
        <font place="MenuItem">
            <name>Inter Display</name>
            <size>11</size>
            <slant>normal</slant>
            <weight>normal</weight>
        </font>
        <font place="OnScreenDisplay">
            <name>Inter Display</name>
            <size>11</size>
            <slant>normal</slant>
            <weight>normal</weight>
        </font>
    </theme>
    -->
    <theme>
        <name>Adwaita-Papirus-dark</name>
        <titlebar layout=":menu,iconify,max,close" showTitle="yes" />
        <cornerRadius>14</cornerRadius>
        <dropShadows>yes</dropShadows>
        <font place="ActiveWindow" name="Cantarell" size="12" weight="bold" />
        <font place="InactiveWindow" name="Cantarell" size="12" weight="bold" />
        <font place="MenuHeader" name="Cantarell" size="12" weight="bold" />
        <font place="MenuItem" name="Cantarell" size="12" />
        <font place="OnScreenDisplay" name="Cantarell" size="12" />
    </theme>

    <windowSwitcher show="yes" preview="yes" outlines="yes" allWorkspaces="no">
        <fields>
            <field content="icon" width="5%" />
            <field content="desktop_entry_name" width="30%" />
            <field content="title" width="60%" />
        </fields>
    </windowSwitcher>

    <resistance>
        <screenEdgeStrength>20</screenEdgeStrength>
        <windowEdgeStrength>20</windowEdgeStrength>
        <unSnapThreshold>20</unSnapThreshold>
        <unMaximizeThreshold>150</unMaximizeThreshold>
    </resistance>

    <resize>
        <popupShow>Always</popupShow>
        <drawContents>yes</drawContents>
        <minimumArea>8</minimumArea>
    </resize>

    <focus>
        <followMouse>no</followMouse>
        <followMouseRequiresMovement>yes</followMouseRequiresMovement>
        <raiseOnFocus>no</raiseOnFocus>
    </focus>

    <snapping>
        <range>10</range>
        <cornerRange>50</cornerRange>
        <overlay enabled="yes">
            <delay inner="500" outer="500" />
        </overlay>
        <topMaximize>yes</topMaximize>
        <notifyClient>always</notifyClient>
    </snapping>

    <desktops>
        <popupTime>500</popupTime>
        <names>
            <name>1</name>
            <name>2</name>
            <name>3</name>
            <name>4</name>
        </names>
    </desktops>


    <regions>
        <region name="center"             x="25%" y="0%" height="100%"    width="50%"    />
        <region name="top"                    x="0%"    y="0%"    height="50%"    width="100%" />
        <region name="left"                 x="0%"    y="0%"    height="100%" width="50%"    />
        <region name="left-most"                 x="0%"    y="0%"    height="100%" width="25%"    />
        <region name="right"                x="50%" y="0%"    height="100%" width="50%"    />
        <region name="right"                x="75%" y="0%"    height="100%" width="25%"    />
        <region name="bottom"             x="0%"    y="50%" height="50%"    width="100%" />
    </regions>


    <!--
        Keybind actions are specified in labwc-actions(5)
        The following keybind modifiers are supported:
            W - window/super/logo
            A - alt
            C - ctrl
            S - shift

        Use <keyboard><default /> to load all the default keybinds (those listed
        below). If the default keybinds are largely what you want, a sensible
        approach could be to start the <keyboard> section with a <default />
        element, and then (re-)define any special binds you need such as launching
        your favourite terminal or application launcher. See rc.xml for an example.
    -->
    <keyboard>
        <!--
            # Numlock is set by default
        -->
        <numlock>on</numlock>
        <layoutScope>global</layoutScope>
        <repeatRate>25</repeatRate>
        <repeatDelay>600</repeatDelay>
        <keybind key="A-Tab">
            <action name="NextWindow" />
        </keybind>
        <keybind key="A-S-Tab">
            <action name="PreviousWindow" />
        </keybind>
        <keybind key="W-Return">
            <action name="Execute" command="lab-sensible-terminal" />
        </keybind>
        <keybind key="W-a">
            <action name="ToggleMaximize" />
        </keybind>

        <keybind key="XF86_AudioLowerVolume">
            <action name="Execute" command="~/.config/scripts/volume.sh --limit 100 --decrease 5" />
        </keybind>
        <keybind key="XF86_AudioRaiseVolume">
            <action name="Execute" command="~/.config/scripts/volume.sh --limit 100 --increase 5" />
        </keybind>
        <keybind key="XF86_AudioMute">
            <action name="Execute" command="~/.config/scripts/volume.sh --toggle-mute" />
        </keybind>
        <keybind key="XF86_MonBrightnessUp">
            <action name="Execute" command="~/.config/scripts/brightness.sh 5%+" />
        </keybind>
        <keybind key="XF86_MonBrightnessDown">
            <action name="Execute" command="~/.config/scripts/brightness.sh 5%-" />
        </keybind>
        <keybind key="XF86_AudioPlay">
            <action name="Execute" command="playerctl play-pause" />
        </keybind>
        <keybind key="Print">
            <action name="Execute" command="~/.config/scripts/screenshot.sh area" />
        </keybind>

        <keybind key="W-q">
            <action name="Close"/>
        </keybind>
        <keybind key="A-F4">
            <action name="Close" />
        </keybind>
        
        <keybind key="C-A-Delete">
            <action name="Execute" command="~/.config/scripts/wlogout.sh" />
        </keybind>
        <keybind key="W-d">
            <action name="Execute" command="fuzzel" />
        </keybind>
        <keybind key="W-l">
            <action name="Execute" command="swaylock -f -c 000000 " />
        </keybind>
        
        <keybind key="W-Up">
            <action name="SnapToRegion" region="center" />
        </keybind>

        <keybind key="W-Right">
            <action name="GoToDesktop" to="right" />
        </keybind>
        <keybind key="W-Left">
            <action name="GoToDesktop" to="left" />
        </keybind>
        <keybind key="W-S-Right">
            <action name="SendToDesktop" to="right" />
        </keybind>
        <keybind key="W-S-Left">
            <action name="SendToDesktop" to="left" />
        </keybind>

        <keybind key="W-1">
            <action name="GoToDesktop" to="1" />
        </keybind>
        <keybind key="W-S-1">
            <action name="SendToDesktop" to="1" />
        </keybind>
        <keybind key="W-2">
            <action name="GoToDesktop" to="2" />
        </keybind>
        <keybind key="W-S-2">
            <action name="SendToDesktop" to="2" />
        </keybind>        
        <keybind key="W-3">
            <action name="GoToDesktop" to="3" />
        </keybind>     
        <keybind key="W-S-3">
            <action name="SendToDesktop" to="3" />
        </keybind>
        <keybind key="W-4">
            <action name="GoToDesktop" to="4" />
        </keybind>
        <keybind key="W-S-4">
            <action name="SendToDesktop" to="4" />
        </keybind>

        <keybind key="W-Tab">
            <action name="ShowMenu" menu="client-list-combined-menu" />
            <position>
                <x>center</x>
                <y>center</y>
            </position>
        </keybind>
    </keyboard>

    <!--
        Multiple <mousebind> can exist within one <context>
        Multiple <actions> can exist within one <mousebind>

        Use <mouse><default /> to load all the default mousebinds (those listed
        below). If the default mousebinds are largely what you want, a sensible
        approach could be to start the <mouse> section with a <default />
        element, and then (re-)define any special binds you need such as launching
        a custom menu when right-clicking on your desktop. See rc.xml for an
        example.
    -->
    <mouse>

        <!-- time is in ms -->
        <doubleClickTime>500</doubleClickTime>

        <context name="Frame">
            <mousebind button="W-Left" action="Press">
                <action name="Focus" />
                <action name="Raise" />
            </mousebind>
            <mousebind button="W-Left" action="Drag">
                <action name="Move" />
            </mousebind>
            <mousebind button="W-Right" action="Press">
                <action name="Focus" />
                <action name="Raise" />
            </mousebind>
            <mousebind button="W-Right" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>

        <context name="Top">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>
        <context name="Left">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>
        <context name="Right">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>
        <context name="Bottom">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>
        <context name="TRCorner">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>
        <context name="BRCorner">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>
        <context name="TLCorner">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>
        <context name="BLCorner">
            <mousebind button="Left" action="Drag">
                <action name="Resize" />
            </mousebind>
        </context>

        <context name="TitleBar">
            <mousebind button="Left" action="Press">
                <action name="Focus" />
                <action name="Raise" />
            </mousebind>
            <mousebind button="Right" action="Click">
                <action name="Focus" />
                <action name="Raise" />
            </mousebind>
        </context>

        <context name="Title">
            <mousebind button="Left" action="Drag">
                <action name="Move" />
            </mousebind>
            <mousebind button="Left" action="DoubleClick">
                <action name="ToggleMaximize" />
            </mousebind>
            <mousebind button="Right" action="Click">
                <action name="ShowMenu" menu="client-menu" />
            </mousebind>
        </context>

        <context name="Maximize">
            <mousebind button="Left" action="Click">
                <action name="ToggleMaximize" />
            </mousebind>
            <mousebind button="Right" action="Click">
                <action name="ToggleMaximize" direction="horizontal" />
            </mousebind>
            <mousebind button="Middle" action="Click">
                <action name="ToggleMaximize" direction="vertical" />
            </mousebind>
        </context>

        <context name="WindowMenu">
            <mousebind button="Left" action="Click">
                <action name="ShowMenu" menu="client-menu" atCursor="no" />
            </mousebind>
            <mousebind button="Right" action="Click">
                <action name="ShowMenu" menu="client-menu" atCursor="no" />
            </mousebind>
        </context>

        <context name="Icon">
            <mousebind button="Left" action="Click">
                <action name="ShowMenu" menu="client-menu" atCursor="no" />
            </mousebind>
            <mousebind button="Right" action="Click">
                <action name="ShowMenu" menu="client-menu" atCursor="no" />
            </mousebind>
        </context>

        <context name="Shade">
            <mousebind button="Left" action="Click">
                <action name="ToggleShade" />
            </mousebind>
        </context>

        <context name="AllDesktops">
            <mousebind button="Left" action="Click">
                <action name="ToggleOmnipresent" />
            </mousebind>
        </context>

        <context name="Iconify">
            <mousebind button="Left" action="Click">
                <action name="Iconify" />
            </mousebind>
        </context>

        <context name="Close">
            <mousebind button="Left" action="Click">
                <action name="Close" />
            </mousebind>
        </context>

        <context name="Client">
            <mousebind button="Left" action="Press">
                <action name="Focus" />
                <action name="Raise" />
            </mousebind>
            <mousebind button="Middle" action="Press">
                <action name="Focus" />
                <action name="Raise" />
            </mousebind>
            <mousebind button="Right" action="Press">
                <action name="Focus" />
                <action name="Raise" />
            </mousebind>
        </context>

        <context name="Root">
            <mousebind button="Right" action="Press">
                <action name="ShowMenu" menu="root-menu" />
            </mousebind>
        </context>

    </mouse>

    <!--
        A touch configuration can be bound to a specific device. If device
        name is left empty, the touch configuration applies to all touch
        devices or functions as a fallback. Multiple touch configurations
        can exist.
        See the libinput device section for obtaining the device names.

        Direct cursor movement to a specified output. If the compositor is
        running in nested mode, this does not take effect.

        If mouseEmulation is enabled, all touch up/down/motion events are
        translated to mouse button and motion events.
    -->
    <touch deviceName="" mapToOutput="" mouseEmulation="no"/>

    <!--
        The tablet cursor movement can be restricted to a single output.
        If output is left empty or the output does not exists, the tablet
        will span all outputs.

        The tablet orientation can be changed in 90 degree steps, thus
        *rotate* can be set to [0|90|180|270]. Rotation will be applied
        after applying tablet area transformation.

        The active tablet area can be specified by setting the *top*/*left*
        coordinate (in mm) and/or *width*/*height* (in mm). If width or
        height are omitted or default (0.0), width/height will be set to
        the remaining width/height seen from top/left.

        The tablet can be forced to always use mouse emulation. This prevents
        tablet specific restrictions, e.g. no support for drag&drop, but also
        omits tablet specific features like reporting pen pressure.

        Pen buttons emulate regular mouse buttons. The pen *button* can be any
        of [Stylus|Stylus2|Stylus3] and can be mapped to mouse buttons
        [Right|Middle|Side]. Tablet pad buttons [Pad|Pad2|Pad3|..|Pad9] also
        emulate regular mouse buttons and can be mapped to any mouse button.
        When using mouse emulation, the pen tip [tip] and the stylus buttons
        can be set to any available mouse button [Left|Right|Middle|..|Task].
    -->
    <tablet mapToOutput="" rotate="0" mouseEmulation="no">
        <!-- Active area dimensions are in mm -->
        <area top="0.0" left="0.0" width="0.0" height="0.0" />
        <map button="Tip" to="Left" />
        <map button="Stylus" to="Right" />
        <map button="Stylus2" to="Middle" />
    </tablet>

    <!--
        All tablet tools, except of type mouse and lens, use absolute
        positioning by default. The *motion* attribute allows to set tools
        to relative motion instead. When using relative motion,
        *relativeMotionSensitivity* controls the speed of the cursor. Using
        a value lower than 1.0 decreases the speed, using a value greater than
        1.0 increases the speed of the cursor.
    -->
    <tabletTool motion="absolute" relativeMotionSensitivity="1.0" />

    <!--
        The *category* attribute is optional and can be set to touch, touchpad,
        non-touch, default or the name of a device. You can obtain device names by
        running *libinput list-devices* as root or member of the input group.

        Tap is set to *yes* by default. All others are left blank in order to use
        device defaults.

        All values are [yes|no] except for:
            - pointerSpeed [-1.0 to 1.0]
            - accelProfile [flat|adaptive]
            - tapButtonMap [lrm|lmr]
            - clickMethod [none|buttonAreas|clickfinger]
            - sendEventsMode [yes|no|disabledOnExternalMouse]
            - calibrationMatrix [six float values split by space]
            - scrollFactor [float]
     
        The following <libinput>...</libinput> block may not be complete for
        your requirements. Default values are device specific. Only set an option
        if you require to override the default. Valid values must be inserted.

    -->

    <libinput>
        <device category="default">
            <naturalScroll>yes</naturalScroll>
            <leftHanded></leftHanded>
            <pointerSpeed></pointerSpeed>
            <accelProfile></accelProfile>
            <tap>yes</tap>
            <tapButtonMap></tapButtonMap>
            <tapAndDrag></tapAndDrag>
            <dragLock></dragLock>
            <threeFingerDrag></threeFingerDrag>
            <middleEmulation></middleEmulation>
            <disableWhileTyping></disableWhileTyping>
            <clickMethod></clickMethod>
            <scrollMethod></scrollMethod>
            <sendEventsMode></sendEventsMode>
            <calibrationMatrix></calibrationMatrix>
            <scrollFactor>1.0</scrollFactor>
        </device>

        <device category="Xiaomi Xiaomi Wireless Mouse 3 Colorful Mouse">
            <naturalScroll>no</naturalScroll>
            <leftHanded></leftHanded>
            <pointerSpeed></pointerSpeed>
            <accelProfile></accelProfile>
            <tap>yes</tap>
            <tapButtonMap></tapButtonMap>
            <tapAndDrag></tapAndDrag>
            <dragLock></dragLock>
            <threeFingerDrag></threeFingerDrag>
            <middleEmulation></middleEmulation>
            <disableWhileTyping></disableWhileTyping>
            <clickMethod></clickMethod>
            <scrollMethod></scrollMethod>
            <sendEventsMode></sendEventsMode>
            <calibrationMatrix></calibrationMatrix>
            <scrollFactor>1.0</scrollFactor>        
        </device>
    </libinput>

    <!--
        # Window Rules
        #     - Criteria can consist of 'identifier', 'title', 'sandboxEngine' or
        #         'sandboxAppId'. AND logic is used when multiple options are specified.
        #     - 'identifier' relates to app_id for native Wayland windows and
        #         WM_CLASS for XWayland clients.
        #     - Criteria can also contain `matchOnce="true"` meaning that the rule
        #         must only apply to the first instance of the window with that
        #         particular 'identifier' or 'title'.
        #     - Matching is case-insensitive and is performed using shell wildcard
        #         patterns (see glob(7)) so '\*' (not between brackets) matches any string
        #         and '?' matches any single character.

        <windowRules>
            <windowRule identifier="*"><action name="Maximize"/></windowRule>
            <windowRule identifier="foo" serverDecoration="yes"/>
            <windowRule title="bar" serverDecoration="yes"/>
            <windowRule identifier="baz" title="quax" serverDecoration="yes"/>
        </windowRules>

        # Example below for `lxqt-panel` and `pcmanfm-qt \-\-desktop`
        # where 'matchOnce' is used to avoid applying rule to the panel
        # configuration window with the same 'app_id'.

        <windowRules>
            <windowRule identifier="lxqt-panel" matchOnce="true">
                <skipTaskbar>yes</skipTaskbar>
                <action name="MoveTo" x="0" y="0" />
                <action name="ToggleAlwaysOnTop"/>
            </windowRule>
            <windowRule title="pcmanfm-desktop*">
                <skipTaskbar>yes</skipTaskbar>
                <skipWindowSwitcher>yes</skipWindowSwitcher>
                <fixedPosition>yes</fixedPosition>
                <action name="MoveTo" x="0" y="0" />
                <action name="ToggleAlwaysOnBottom"/>
            </windowRule>
            <windowRule identifier="org.qutebrowser.qutebrowser">
                <action name="ResizeTo" width="1024" height="800" />
                <action name="AutoPlace"/>
            </windowRule>
        </windowRules>
    -->

    <menu>
        <ignoreButtonReleasePeriod>250</ignoreButtonReleasePeriod>
        <showIcons>yes</showIcons>
    </menu>

    <!--
        Magnifier settings
        'width' sets the width in pixels of the magnifier window.
        'height' sets the height in pixels of the magnifier window.
        'initScale' sets the initial magnification factor at boot.
        'increment' sets the amount by which the magnification factor
            changes when 'ZoomIn' or 'ZoomOut' are called.
        'useFilter' sets whether to use a bilinear filter on the magnified
            output or simply to take nearest pixel.
    -->
    <magnifier>
        <width>400</width>
        <height>400</height>
        <initScale>2.0</initScale>
        <increment>0.2</increment>
        <useFilter>true</useFilter>
    </magnifier>

</labwc_config>